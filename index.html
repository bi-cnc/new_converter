<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8">
  <title>Převodník měn – ČNB</title>
  <style>
    body { font-family: sans-serif; text-align: center; padding: 2rem; }
    input, select, button { margin: 0.5rem; padding: 0.5rem; }
    button { background: #FA3A3C; color: white; border: none; border-radius: 4px; }
  </style>
</head>
<body>
  <h2>Převodník měn – ČNB</h2>
  <p>Datum: <span id="rateDate"></span></p>

  <p>
    Základní měna:
    <select id="from"></select>
    Cílová měna:
    <select id="to"></select><br>
    Částka:
    <input type="number" id="amount" value="1" min="0.01" step="0.01"><br>
    <button id="convert">Spočítat</button>
  </p>
  <div id="result"></div>

  <script>
    let rates = {};
    async function loadRates() {
      const res = await fetch("data/latest.json");
      rates = await res.json();
      document.getElementById("rateDate").textContent = rates.date;

      const currencies = Object.keys(rates);
      const from = document.getElementById("from");
      const to = document.getElementById("to");
      from.innerHTML = currencies.map(c => `<option>${c}</option>`).join("");
      to.innerHTML = currencies.map(c => `<option>${c}</option>`).join("");
      from.value = "EUR"; to.value = "CZK";
    }

    function convert() {
      const from = document.getElementById("from").value;
      const to = document.getElementById("to").value;
      const amount = parseFloat(document.getElementById("amount").value);
      if (!rates[from] || !rates[to]) return;

      const czk = (amount / rates[from].quantity) * rates[from].rate;
      const result = (czk / rates[to].rate) * rates[to].quantity;
      document.getElementById("result").innerHTML =
        `<b>${amount.toFixed(2)} ${from} = ${result.toFixed(2)} ${to}</b>`;
    }

    document.getElementById("convert").onclick = convert;
    loadRates();
  </script>
</body>
</html>
